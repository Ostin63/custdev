const body=document.querySelector(".body"),headerSelectCity=body.querySelector(".header__select-city"),headerListSelectCity=body.querySelector(".header__list-select-city"),buttonSelectCities=body.querySelectorAll(".header__item-select-city"),headerLinkSelect=body.querySelectorAll(".header__link-select-city"),dataCity=body.querySelector(".header__block-text p"),headerButtonMenu=body.querySelector(".header__button-menu"),headerNav=body.querySelector(".header__wrapper-nav"),headerNavClose=headerNav.querySelector(".header__nav-close"),headerNavButtons=headerNav.querySelectorAll(".header__nav-item"),footerSelectCityButtons=body.querySelectorAll(".footer__item-select-city"),modalForm=body.querySelector(".consist__form"),dataSabmitUrl="https://echo.htmlacademy.ru/",getTemplateContent=(e,t)=>e.querySelector(`#${t}`).content.querySelector(`.${t}`),success=getTemplateContent(body,"alert__success"),errorLoading=getTemplateContent(body,"alert__error-loading"),successElement=success.cloneNode(!0),successErrorLoading=errorLoading.cloneNode(!0),cityData=[" 10-21 мая"," 20-31 июня"," 10-21 августа"],keys={escape:"Escape",esc:"Escape"},isEscEvent=e=>e.key===keys.escape||e.key===keys.esc,onErrorRemove=()=>{successErrorLoading.remove(),document.removeEventListener("click",onErrorRemove)},onSuccessRemove=()=>{successElement.remove(),document.removeEventListener("click",onSuccessRemove)},onElementEscRemove=()=>{isEscEvent&&(onSuccessRemove(),document.removeEventListener("keydown",onElementEscRemove))},onErrorEscRemove=()=>{isEscEvent&&(onErrorRemove(),document.removeEventListener("keydown",onErrorEscRemove))},alertSuccess=()=>{body.append(successElement),document.addEventListener("click",onSuccessRemove),document.addEventListener("keydown",onElementEscRemove)},alertError=()=>{body.append(successErrorLoading),document.addEventListener("click",onErrorRemove),document.addEventListener("keydown",onErrorEscRemove)},onClickSelectedMenu=()=>{headerSelectCity.classList.toggle("header__select-city--active"),headerListSelectCity.classList.toggle("header__list-select-city--active")};function switchCities(e,t,c,o,r,s){for(let n=0;n<e.length;n++)e[n].addEventListener("click",(()=>{for(let c=0;c<e.length;c++)e[c].classList.remove("header__item-select-city--selected"),t[c].classList.remove("footer__item-select-city--active");e[n].classList.add("header__item-select-city--selected"),t[n].classList.add("footer__item-select-city--active"),c.textContent=o[n].textContent,r.textContent=o[n].textContent+s[n],onClickSelectedMenu()}))}function switchCitiesFooter(e,t,c,o,r,s){for(let n=0;n<e.length;n++)t[n].addEventListener("click",(()=>{for(let c=0;c<e.length;c++)e[c].classList.remove("header__item-select-city--selected"),t[c].classList.remove("footer__item-select-city--active");e[n].classList.add("header__item-select-city--selected"),t[n].classList.add("footer__item-select-city--active"),c.textContent=o[n].textContent,r.textContent=o[n].textContent+s[n],headerListSelectCity.classList.remove("header__list-select-city--active"),headerSelectCity.classList.remove("header__select-city--active")}))}const onAddMenu=()=>{headerNav.classList.add("header__wrapper-nav--active")},onRemoveMenu=()=>{headerNav.classList.remove("header__wrapper-nav--active")},sendData=(e,t,c,o)=>{fetch(e,{method:"POST",body:t}).then((e=>{e.ok?c():o()})).catch((()=>{o()}))},onFormSend=e=>{e.preventDefault();const t=new FormData(e.target);var c,o;c=alertSuccess,o=alertError,fetch(dataSabmitUrl,{method:"POST",body:t}).then((e=>{e.ok?c():o()})).catch((()=>{o()}))};for(const e of headerNavButtons)e.addEventListener("click",onRemoveMenu);modalForm.addEventListener("submit",onFormSend),headerButtonMenu.addEventListener("click",onAddMenu),headerNavClose.addEventListener("click",onRemoveMenu),headerSelectCity.addEventListener("click",onClickSelectedMenu),switchCities(buttonSelectCities,footerSelectCityButtons,headerSelectCity,headerLinkSelect,dataCity,cityData),switchCitiesFooter(buttonSelectCities,footerSelectCityButtons,headerSelectCity,headerLinkSelect,dataCity,cityData);
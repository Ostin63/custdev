const body=document.querySelector(".body"),headerSelectCity=body.querySelector(".header__select-city"),headerListSelectCity=body.querySelector(".header__list-select-city"),buttonSelectCities=body.querySelectorAll(".header__item-select-city"),headerLinkSelect=body.querySelectorAll(".header__link-select-city"),headerButtonMenu=document.querySelector(".header__button-menu"),headerNav=body.querySelector(".header__wrapper-nav"),headerNavClose=headerNav.querySelector(".header__nav-close"),headerNavButtons=headerNav.querySelectorAll(".header__nav-item"),modalForm=body.querySelector(".consist__form"),dataSabmitUrl="https://echo.htmlacademy.ru/",getTemplateContent=(e,t)=>e.querySelector(`#${t}`).content.querySelector(`.${t}`),success=getTemplateContent(body,"alert__success"),errorLoading=getTemplateContent(body,"alert__error-loading"),successElement=success.cloneNode(!0),successErrorLoading=errorLoading.cloneNode(!0),keys={escape:"Escape",esc:"Escape"},isEscEvent=e=>e.key===keys.escape||e.key===keys.esc,onErrorRemove=()=>{successErrorLoading.remove(),document.removeEventListener("click",onErrorRemove)},onSuccessRemove=()=>{successElement.remove(),document.removeEventListener("click",onSuccessRemove)},onElementEscRemove=()=>{isEscEvent&&(onSuccessRemove(),document.removeEventListener("keydown",onElementEscRemove))},onErrorEscRemove=()=>{isEscEvent&&(onErrorRemove(),document.removeEventListener("keydown",onErrorEscRemove))},alertSuccess=()=>{body.append(successElement),document.addEventListener("click",onSuccessRemove),document.addEventListener("keydown",onElementEscRemove)},alertError=()=>{body.append(successErrorLoading),document.addEventListener("click",onErrorRemove),document.addEventListener("keydown",onErrorEscRemove)},onClickSelectedMenu=()=>{headerSelectCity.classList.toggle("header__select-city--active"),headerListSelectCity.classList.toggle("header__list-select-city--active")},switchCities=(e,t,o)=>{for(let r=0;r<e.length;r++)e[r].addEventListener("click",(()=>{for(let t=0;t<e.length;t++)e[t].classList.remove("header__item-select-city--selected");e[r].classList.add("header__item-select-city--selected"),t.textContent=o[r].textContent,onClickSelectedMenu()}))},onAddMenu=()=>{headerNav.classList.add("header__wrapper-nav--active")},onRemoveMenu=()=>{headerNav.classList.remove("header__wrapper-nav--active")},sendData=(e,t,o,r)=>{fetch(e,{method:"POST",body:t}).then((e=>{e.ok?o():r()})).catch((()=>{r()}))},onFormSend=e=>{e.preventDefault();const t=new FormData(e.target);var o,r;o=alertSuccess,r=alertError,fetch(dataSabmitUrl,{method:"POST",body:t}).then((e=>{e.ok?o():r()})).catch((()=>{r()}))};for(const e of headerNavButtons)e.addEventListener("click",onRemoveMenu);modalForm.addEventListener("submit",onFormSend),headerButtonMenu.addEventListener("click",onAddMenu),headerNavClose.addEventListener("click",onRemoveMenu),headerSelectCity.addEventListener("click",onClickSelectedMenu),switchCities(buttonSelectCities,headerSelectCity,headerLinkSelect);